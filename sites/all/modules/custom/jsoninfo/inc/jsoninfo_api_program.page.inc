<?php
/**
 * callback from hook_menu()
 */
function _jsoninfo_program_table($tid = NULL, $start_time = NULL, $end_time = NULL) {
  $TermProgramQuery = new TermProgramQuery();
  $program_tids = $TermProgramQuery->programTidsByUnit($tid);

  $JsonData = new JsonData();
  drupal_json_output($JsonData->jsonProgramTable($program_tids, $start_time, $end_time));
}

/**
 * callback from hook_menu(), Therapeutic Area
 */
function _jsoninfo_program_area($tid = NULL, $start_time = NULL, $end_time = NULL) {
  $TermProgramQuery = new TermProgramQuery();
  $program_tids = $TermProgramQuery->programTidsByArea($tid);

  $JsonData = new JsonData();
  drupal_json_output($JsonData->jsonProgramArea($program_tids, $start_time, $end_time));
}
/**
 * callback from hook_menu(), Therapeutic Area and Type
 */
function _jsoninfo_program_area_accredited($tid = NULL, $start_time = NULL, $end_time = NULL) {
  $TermProgramQuery = new TermProgramQuery();
  $program_tids = $TermProgramQuery->programTidsByArea($tid);
  $accredited_program_tids = $TermProgramQuery->programTidsByField($program_tids, $field_method = 'programTypeTids', $filter_tids = array(74));

  $JsonData = new JsonData();
  drupal_json_output($JsonData->jsonProgramAreaType($accredited_program_tids, $start_time, $end_time));
}
/**
 * callback from hook_menu(), Therapeutic Area and Type
 */
function _jsoninfo_program_area_ola($tid = NULL, $start_time = NULL, $end_time = NULL) {
  $TermProgramQuery = new TermProgramQuery();
  $program_tids = $TermProgramQuery->programTidsByArea($tid);
  $ola_program_tids = $TermProgramQuery->programTidsByField($program_tids, $field_method = 'programTypeTids', $filter_tids = array(75));

  $JsonData = new JsonData();
  drupal_json_output($JsonData->jsonProgramAreaType($ola_program_tids, $start_time, $end_time));
}

/**
 * callback from hook_menu()
 */
function _jsoninfo_program_unit($tid = NULL, $start_time = NULL, $end_time = NULL) {
  $TermProgramQuery = new TermProgramQuery();
  $program_tids = $TermProgramQuery->programTidsByUnit($tid);

  $JsonData = new JsonData();
  drupal_json_output($JsonData->jsonProgramUnit($program_tids, $start_time, $end_time));

  // tell the browser returning JSON.
  // drupal_add_http_header('Content-Type', 'application/json');
  // echo _jsoninfo_program_unit_json();
}

/**
 * callback from hook_menu()
 */
function _jsoninfo_program_unit_program($tid = NULL, $start_time = NULL, $end_time = NULL) {
  $TermProgramQuery = new TermProgramQuery();
  $program_tids = $TermProgramQuery->programTidsByUnit($tid);

  $JsonData = new JsonData();
  drupal_json_output($JsonData->jsonProgramUnitProgram($program_tids, $start_time, $end_time));
}

/**
 *
 */
function _jsoninfo_program_unit_json() {

  $json = '
      {"pageWidgets":{"class":["font-size-12"],"type":"widget2","value":[{"title":"Total Programs","value":224,"bgColorClass1":"bg-00a9e0","bgColorClass2":"bg-05d23e","subLabel1":"Accredited","subValue1":198,"subLabel2":"OLA","subValue2":2},{"title":"Evaluations Attendees","value":2841,"bgColorClass1":"bg-00a9e0","bgColorClass2":"bg-05d23e","subLabel1":"Accredited","subValue1":2618,"subLabel2":"OLA","subValue2":0},{"title":"Evaluations Recieved","value":2129,"bgColorClass1":"bg-00a9e0","bgColorClass2":"bg-05d23e","subLabel1":"Accredited","subValue1":2129,"subLabel2":"OLA","subValue2":0},{"title":"Audience Speaker Rate","value":"4.59","bgColorClass1":"bg-00a9e0","bgColorClass2":"bg-05d23e","subLabel1":"Accredited","subValue1":"4.59","subLabel2":"OLA","subValue2":"0.00"}]},"pageCharts":[{"caption":"Accredited Vs. OLA Programs","captionBgColorClass":"bg-344a5f","captionColor":["#344a5f","#56bfb5","#f24b99","#bfbfbf","#e6e6e6"],"captionLegend":"","captionTitle":"","column":6,"chartGroup":"1","charts":[{"chartType":"doughnut","chartTypeClass":"chart-donut","colorClass":["#00a9e0","#05d23e"],"data":[198,2],"legend":["Accredited","OLA"],"title":"92.86% of participants rate Speaker as Effective or Very Effective"}]},{"caption":"Business Unit Summary","captionBgColorClass":"bg-344a5f","captionColor":["#344a5f","#56bfb5","#f24b99","#bfbfbf","#e6e6e6"],"captionLegend":"","captionTitle":"","column":6,"chartGroup":"1","charts":[{"chartType":"Bar","chartTypeClass":"chart-bar","colorClass":["#344a5f","#56bfb5","#f24b99","#bfbfbf","#e6e6e6"],"chartId":101,"data":{"labels":["Cardiovascular","Metabolic","Oncology","Respirology"],"datasets":[{"fillColor":"#00a9e0","strokeColor":"#00a9e0","pointColor":"#05d23e","pointStrokeColor":"#fff","data":[0,198,0,0],"title":"Accredited"},{"fillColor":"#05d23e","strokeColor":"#05d23e","pointColor":"#00a9e0","pointStrokeColor":"#fff","data":[2,0,0,0],"title":"OLA"}]},"legend":["Very Likely","Likely","Neutral","Unlikely","Very Unlikely"],"title":"83.29% of participants will Likely or Very Likely make changes"}]},{"caption":"Speaker Effectiveness - All Programs","captionBgColorClass":"bg-344a5f","captionColor":["#344a5f","#56bfb5","#f24b99","#bfbfbf","#e6e6e6"],"captionLegend":"","captionTitle":"","column":6,"chartGroup":"1","charts":[{"chartType":"piechart","chartTypeClass":"chart-piechart","colorClass":["#00a9e0","#05d23e","#f24b99","#bfbfbf","#e6e6e6"],"data":[1894,746,96,7,1],"legend":["Very Effective","Effective","Neutral","Ineffective","Very Ineffective"],"title":"92.86% of report the speaker are Effective or Very Effective"}]},{"caption":"Likihood of Changing Clinical Practice","captionBgColorClass":"bg-344a5f","captionColor":["#344a5f","#56bfb5","#f24b99","#bfbfbf","#e6e6e6"],"captionLegend":"","captionTitle":"","column":6,"chartGroup":"1","charts":[{"chartType":"piechart","chartTypeClass":"chart-piechart","colorClass":["#00a9e0","#05d23e","#f24b99","#bfbfbf","#e6e6e6"],"data":[794,990,270,8,18],"legend":["Very Likely","Likely","Neutral","Unlikely","Very Unlikely"],"title":"82.86% of HCP\u0027s are Likely or Very Likely to Change Clinical Practice"}]}],"timeGeographyCharts":{"programByMonth":{"chartId":"100","chartType":"Line","chartData":{"labels":["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],"datasets":[{"fillColor":"rgba(151,187,205,0)","strokeColor":"#00a9e0","pointColor":"#05d23e","pointStrokeColor":"#fff","data":[0,0,12,21,38,27,7,3,14,65,11,0],"title":"Accredited"},{"fillColor":"rgba(151,187,205,0)","strokeColor":"#05d23e","pointColor":"#00a9e0","pointStrokeColor":"#fff","data":[2,0,0,0,0,0,0,0,0,0,0,0],"title":"OLA"}]}},"programByRegion":{"chartId":"102","chartType":"HorizontalBar","chartData":{"labels":["R1","R2","R3"],"datasets":[{"fillColor":"#00a9e0","strokeColor":"#00a9e0","pointColor":"#05d23e","pointStrokeColor":"#fff","data":[69,104,25],"title":"Accredited"},{"fillColor":"#05d23e","strokeColor":"#05d23e","pointColor":"#00a9e0","pointStrokeColor":"#fff","data":[0,0,0],"title":"OLA"}]}},"programByProvince":{"chartId":"103","chartType":"Bar","chartData":{"labels":["BC","AB","SK","MB","ON","QC","NB","PEI","NS","NL"],"datasets":[{"fillColor":"#00a9e0","strokeColor":"#00a9e0","pointColor":"#05d23e","pointStrokeColor":"#fff","data":[32,25,8,4,92,25,2,0,7,3],"title":"Accredited"},{"fillColor":"#05d23e","strokeColor":"#05d23e","pointColor":"#00a9e0","pointStrokeColor":"#fff","data":[0,0,0,0,0,0,0,0,0,0],"title":"OLA"}]}}},"tableTopRatedSpeakers":[{"userName":"Arun Gupta","eventNumber":1,"evaluationNumber":3,"participantNumber":7,"rateScore":3.4},{"userName":"Colin MacDonald","eventNumber":1,"evaluationNumber":7,"participantNumber":11,"rateScore":3.6},{"userName":"Daniel Ngui","eventNumber":2,"evaluationNumber":33,"participantNumber":37,"rateScore":4.2},{"userName":"Gudrun Caspar-Bell","eventNumber":4,"evaluationNumber":45,"participantNumber":51,"rateScore":4},{"userName":"Tharsan Sivakumar","eventNumber":4,"evaluationNumber":40,"participantNumber":51,"rateScore":4.5},{"userName":"John Sigalas","eventNumber":5,"evaluationNumber":29,"participantNumber":59,"rateScore":3},{"userName":"Oren Steen","eventNumber":1,"evaluationNumber":14,"participantNumber":14,"rateScore":3.9},{"userName":"Afshan Zahedi","eventNumber":3,"evaluationNumber":48,"participantNumber":69,"rateScore":4.3},{"userName":"Yves Robitaille","eventNumber":1,"evaluationNumber":9,"participantNumber":10,"rateScore":4.3},{"userName":"Stavroula Christopoulos","eventNumber":5,"evaluationNumber":51,"participantNumber":73,"rateScore":4.1},{"userName":"Henry Wang","eventNumber":4,"evaluationNumber":12,"participantNumber":21,"rateScore":3.4},{"userName":"Sorin Beca","eventNumber":2,"evaluationNumber":10,"participantNumber":13,"rateScore":3.8},{"userName":"Jeremy Gilbert","eventNumber":3,"evaluationNumber":22,"participantNumber":22,"rateScore":3.7},{"userName":"Robert Schlosser","eventNumber":2,"evaluationNumber":13,"participantNumber":23,"rateScore":3.5},{"userName":"Robyn Houlden","eventNumber":3,"evaluationNumber":23,"participantNumber":29,"rateScore":4.2},{"userName":"Alice Cheng","eventNumber":7,"evaluationNumber":89,"participantNumber":128,"rateScore":4.1},{"userName":"Robert Ting","eventNumber":1,"evaluationNumber":8,"participantNumber":9,"rateScore":4.7},{"userName":"Jean-Francois Yale","eventNumber":1,"evaluationNumber":14,"participantNumber":14,"rateScore":4},{"userName":"John MacFadyen","eventNumber":2,"evaluationNumber":11,"participantNumber":16,"rateScore":4.2},{"userName":"Shajia Khan","eventNumber":2,"evaluationNumber":18,"participantNumber":36,"rateScore":3},{"userName":"Ali Torshizi","eventNumber":2,"evaluationNumber":3,"participantNumber":5,"rateScore":3.3},{"userName":"Tisha Joy","eventNumber":5,"evaluationNumber":31,"participantNumber":63,"rateScore":3.5},{"userName":"Josef Silha","eventNumber":2,"evaluationNumber":14,"participantNumber":18,"rateScore":4.1},{"userName":"Hamid Mojab","eventNumber":3,"evaluationNumber":25,"participantNumber":25,"rateScore":3.9},{"userName":"Malcolm Pike","eventNumber":3,"evaluationNumber":13,"participantNumber":23,"rateScore":3.7},{"userName":"Jeffrey Winterstein","eventNumber":3,"evaluationNumber":17,"participantNumber":17,"rateScore":4},{"userName":"Joseph Shaban","eventNumber":1,"evaluationNumber":5,"participantNumber":7,"rateScore":4},{"userName":"Robert Wilson","eventNumber":4,"evaluationNumber":43,"participantNumber":43,"rateScore":4.2},{"userName":"Brian Moses","eventNumber":2,"evaluationNumber":9,"participantNumber":9,"rateScore":3.2},{"userName":"Sylvie Bertrand","eventNumber":2,"evaluationNumber":29,"participantNumber":29,"rateScore":3.9},{"userName":"Lisa Maks","eventNumber":1,"evaluationNumber":4,"participantNumber":5,"rateScore":3.5},{"userName":"Andrew Farquar","eventNumber":1,"evaluationNumber":0,"participantNumber":0,"rateScore":4.1},{"userName":"Tina Kader","eventNumber":3,"evaluationNumber":14,"participantNumber":29,"rateScore":4.8},{"userName":"Sara Stafford","eventNumber":4,"evaluationNumber":47,"participantNumber":94,"rateScore":4.1},{"userName":"Luciana Parlea","eventNumber":1,"evaluationNumber":7,"participantNumber":9,"rateScore":3.1},{"userName":"Ben Schroeder","eventNumber":1,"evaluationNumber":9,"participantNumber":12,"rateScore":4.7},{"userName":"Harpreet Bajaj","eventNumber":4,"evaluationNumber":37,"participantNumber":63,"rateScore":4.3},{"userName":"David Shu","eventNumber":1,"evaluationNumber":2,"participantNumber":4,"rateScore":4.7},{"userName":"Jan van Wijk","eventNumber":2,"evaluationNumber":6,"participantNumber":11,"rateScore":3},{"userName":"Maureen Clement","eventNumber":2,"evaluationNumber":19,"participantNumber":33,"rateScore":3.9},{"userName":"Hasnain Khandwala","eventNumber":3,"evaluationNumber":23,"participantNumber":33,"rateScore":3.5},{"userName":"S Bose","eventNumber":1,"evaluationNumber":36,"participantNumber":36,"rateScore":3},{"userName":"Karen Silver","eventNumber":1,"evaluationNumber":24,"participantNumber":27,"rateScore":4.7},{"userName":"Ronald Goldenburg","eventNumber":1,"evaluationNumber":4,"participantNumber":6,"rateScore":4.4},{"userName":"Rola Zamel","eventNumber":1,"evaluationNumber":14,"participantNumber":14,"rateScore":3.9},{"userName":"Phyllis Hierlihy","eventNumber":1,"evaluationNumber":13,"participantNumber":27,"rateScore":4.5},{"userName":"Donna Birbrager","eventNumber":3,"evaluationNumber":85,"participantNumber":95,"rateScore":3.2},{"userName":"Thomas Ransom","eventNumber":2,"evaluationNumber":15,"participantNumber":26,"rateScore":4.8},{"userName":"Vladimir Milosevic","eventNumber":2,"evaluationNumber":22,"participantNumber":45,"rateScore":3.7},{"userName":"David Lau","eventNumber":2,"evaluationNumber":39,"participantNumber":56,"rateScore":4},{"userName":"Chantal Godin","eventNumber":1,"evaluationNumber":18,"participantNumber":27,"rateScore":3},{"userName":"Phoebe Bishara","eventNumber":1,"evaluationNumber":14,"participantNumber":21,"rateScore":4.3},{"userName":"Denis Chauret","eventNumber":4,"evaluationNumber":37,"participantNumber":42,"rateScore":4},{"userName":"Luis Noronha","eventNumber":3,"evaluationNumber":35,"participantNumber":51,"rateScore":4.8},{"userName":"Ally Prebtani","eventNumber":1,"evaluationNumber":15,"participantNumber":19,"rateScore":4.6},{"userName":"Lunel Charlot","eventNumber":3,"evaluationNumber":6,"participantNumber":11,"rateScore":5},{"userName":"Andrea Delrue","eventNumber":4,"evaluationNumber":26,"participantNumber":53,"rateScore":3.5},{"userName":"Akshay Jain","eventNumber":8,"evaluationNumber":42,"participantNumber":85,"rateScore":4.7},{"userName":"Diane Zatelny","eventNumber":4,"evaluationNumber":19,"participantNumber":39,"rateScore":4.2},{"userName":"Jean Garon","eventNumber":2,"evaluationNumber":8,"participantNumber":11,"rateScore":3.2},{"userName":"Allyson Adduono","eventNumber":2,"evaluationNumber":6,"participantNumber":12,"rateScore":4.3},{"userName":"Sue Pedersen","eventNumber":1,"evaluationNumber":23,"participantNumber":23,"rateScore":4.7},{"userName":"Dany Rioux","eventNumber":1,"evaluationNumber":0,"participantNumber":0,"rateScore":3.3},{"userName":"Pradip Joshi","eventNumber":1,"evaluationNumber":4,"participantNumber":5,"rateScore":4.5},{"userName":"Peter Senior","eventNumber":3,"evaluationNumber":20,"participantNumber":26,"rateScore":3.2},{"userName":"Diane Donat","eventNumber":2,"evaluationNumber":24,"participantNumber":40,"rateScore":4.9},{"userName":"Kathleen Raby","eventNumber":2,"evaluationNumber":21,"participantNumber":42,"rateScore":4.3},{"userName":"Shelley Irvine","eventNumber":1,"evaluationNumber":8,"participantNumber":11,"rateScore":4.6},{"userName":"Steven Caldwell","eventNumber":1,"evaluationNumber":11,"participantNumber":22,"rateScore":3.1},{"userName":"Carlyle Chow","eventNumber":1,"evaluationNumber":3,"participantNumber":4,"rateScore":4.4},{"userName":"Roland Genge","eventNumber":1,"evaluationNumber":4,"participantNumber":4,"rateScore":3},{"userName":"Sandra Babin","eventNumber":2,"evaluationNumber":8,"participantNumber":11,"rateScore":4.8},{"userName":"Paul Ren\u00e9","eventNumber":2,"evaluationNumber":7,"participantNumber":13,"rateScore":4.3},{"userName":"Vincent Woo","eventNumber":10,"evaluationNumber":151,"participantNumber":168,"rateScore":3.8},{"userName":"Trevor Bon","eventNumber":1,"evaluationNumber":28,"participantNumber":48,"rateScore":3.5},{"userName":"Falah Majid","eventNumber":1,"evaluationNumber":7,"participantNumber":9,"rateScore":3.7},{"userName":"Marie-France Levac","eventNumber":1,"evaluationNumber":0,"participantNumber":0,"rateScore":3.7},{"userName":"Michelle Lecompte","eventNumber":1,"evaluationNumber":0,"participantNumber":0,"rateScore":4.2},{"userName":"Stuart Ross","eventNumber":5,"evaluationNumber":64,"participantNumber":80,"rateScore":4.8},{"userName":"Michel Vall\u00e9e","eventNumber":1,"evaluationNumber":22,"participantNumber":32,"rateScore":3},{"userName":"Ariane Godbout","eventNumber":1,"evaluationNumber":7,"participantNumber":7,"rateScore":4.2},{"userName":"Michel Chiasson","eventNumber":1,"evaluationNumber":15,"participantNumber":15,"rateScore":3.2},{"userName":"Grady Meneilly","eventNumber":2,"evaluationNumber":24,"participantNumber":41,"rateScore":4.1},{"userName":"Robin Conway","eventNumber":1,"evaluationNumber":11,"participantNumber":11,"rateScore":3.8},{"userName":"Sonja Reichert","eventNumber":1,"evaluationNumber":0,"participantNumber":0,"rateScore":4.3},{"userName":"A.I. Moldoveanu","eventNumber":1,"evaluationNumber":6,"participantNumber":12,"rateScore":3.9},{"userName":"Rustom Guzder","eventNumber":1,"evaluationNumber":10,"participantNumber":13,"rateScore":4.4},{"userName":"David Kennedy","eventNumber":3,"evaluationNumber":0,"participantNumber":0,"rateScore":4.9},{"userName":"Greg Bondy","eventNumber":4,"evaluationNumber":37,"participantNumber":62,"rateScore":3.1},{"userName":"Elika Safar","eventNumber":1,"evaluationNumber":5,"participantNumber":8,"rateScore":4.2},{"userName":"Paul Rene De Cotret","eventNumber":1,"evaluationNumber":3,"participantNumber":5,"rateScore":4.7},{"userName":"Nikhil Gupta","eventNumber":1,"evaluationNumber":3,"participantNumber":3,"rateScore":3.3},{"userName":"Anick Pelletier","eventNumber":1,"evaluationNumber":13,"participantNumber":23,"rateScore":3.1},{"userName":"Albert Kadri","eventNumber":1,"evaluationNumber":0,"participantNumber":0,"rateScore":4.5},{"userName":"Heywood Choi","eventNumber":3,"evaluationNumber":10,"participantNumber":10,"rateScore":3.2},{"userName":"Adam White","eventNumber":2,"evaluationNumber":46,"participantNumber":52,"rateScore":4.9},{"userName":"Lee MacKay","eventNumber":1,"evaluationNumber":14,"participantNumber":16,"rateScore":4.4},{"userName":"Vernon Chichak","eventNumber":2,"evaluationNumber":20,"participantNumber":40,"rateScore":5},{"userName":"Gordon Grills","eventNumber":1,"evaluationNumber":7,"participantNumber":13,"rateScore":5},{"userName":"Dale Clayton","eventNumber":1,"evaluationNumber":6,"participantNumber":9,"rateScore":4.6},{"userName":"Rick Ward","eventNumber":1,"evaluationNumber":8,"participantNumber":10,"rateScore":3.8},{"userName":"Donna Mojdami","eventNumber":1,"evaluationNumber":9,"participantNumber":15,"rateScore":3.5},{"userName":"Jordan Weinstein","eventNumber":1,"evaluationNumber":5,"participantNumber":10,"rateScore":4.1}],"tableTopAccreditedProgram":[{"programName":"Diabetes in Distinct Populations","eventNumber":119,"evaluationNumber":1051,"participantNumber":1752,"ntsScore":"+36"},{"programName":"Diabetes in Distinct Populations FMOQ Version","eventNumber":13,"evaluationNumber":93,"participantNumber":117,"ntsScore":"+43"},{"programName":"Rethink the NOAC Options for AF: REVERSAL is Now a Reality","eventNumber":2,"evaluationNumber":0,"participantNumber":0,"ntsScore":"+64"},{"programName":"New vs Old: Antihyperglycemic Treatment Considerations for T2DM","eventNumber":4,"evaluationNumber":0,"participantNumber":0,"ntsScore":"+67"},{"programName":"Shine a Light on Type 2 Diabetes","eventNumber":23,"evaluationNumber":105,"participantNumber":210,"ntsScore":"+47"},{"programName":"Shine a Light on Type 2 Diabetes FMOQ","eventNumber":1,"evaluationNumber":6,"participantNumber":13,"ntsScore":"+60"},{"programName":"Spotlight on SGLT2 inhibitors","eventNumber":62,"evaluationNumber":524,"participantNumber":749,"ntsScore":"+70"}]}
  ';

  return $json;
}







